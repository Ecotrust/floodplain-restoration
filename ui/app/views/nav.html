
<nav class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container-fluid">
    <div class="navbar-header">    
      <a class="navbar-brand" href="#" > 
        <span class="glyphicon glyphicon-stats"></span> &nbsp;&nbsp; 
        <span ng-bind="content.title">Floodplain Gravel Mine Restoration</span>
      </a>
    </div>
    <div class="collapse navbar-collapse" id="main-navbar">
      <ul class="nav navbar-nav navbar-left">
        <li>
          <p class="active-site-name" ng-bind="site.properties.name"></strong>
        </li>
      </ul>
      <ul class="nav navbar-nav navbar-right">

        <li class="dropdown" ng-show="userName">
          <a class="dropdown-toggle" data-toggle="dropdown">
            Site <span class="caret"></span>
          </a>
          <ul class="dropdown-menu" role="menu">
            <li class="nav-dd" ng-click="href('help/documents')">
              DOCUMENTS
            </li>
            <li class="nav-dd" ng-click="href('site/new')">
              ADD A SITE
            </li>
            <li ng-repeat="site in sites" class="nav-dd" ng-click="href('site/' + site.id)">
              {{site.properties.name | uppercase}}
            </li>
            <li class="nav-dd last-dd" ng-click="href('sites')">ALL SITES</a></li>
          </ul>
        </li>

        <li class="dropdown" ng-show="activeSiteId">
          <a class="dropdown-toggle" data-toggle="dropdown">
            Questions <span class="caret"></span>
          </a>
          <ul class="dropdown-menu" role="menu">
            <li ng-repeat="context in contexts" ng-if="context.components.length>0" class="dropdown-submenu">
              <div ng-repeat="component in context.components" ng-if="component.question_ids.length>0" class="dropdown-submenu nav-dd">
                {{component.name | uppercase}}
                <ul class="dropdown-menu survey-question-dd" role="menu">
                  <li class="nav-dd" ng-repeat="question_id in component.question_ids" ng-click="href('site/' + activeSiteId + '/survey/' + question_id + '/')" ng-class="{ 'last-dd' : $index+1 == component.question_ids.length}">
                    {{questionsObj[question_id.toString()].title | uppercase}}
                  </li>
                </ul>
              </div>
            </li>    
            <li class="nav-dd last-dd" ng-click="href('site/' + activeSiteId + '/report')">  
              REPORT
            </li>    
          </ul>
        </li>

        <li class="dropdown">
          <a class="dropdown-toggle" data-toggle="dropdown">
            Help <span class="caret"></span>
          </a>
          <ul class="dropdown-menu" role="menu">
            <li class="nav-dd" ng-click="href('help/about')">ABOUT THE TOOL</li>
            <li class="nav-dd" ng-click="href('help/resources')">RESOURCES</li>
            <li class="nav-dd last-dd" ng-click="href('help/faq')">F. A. Q.</li>
          </ul>
        </li>

        <li ng-if="!userName">
          <a href="/accounts/login" class="dropdown-toggle">
            <span class="glyphicon glyphicon-user"></span>
            Log In
          </a> 
        </li>

        <li ng-if="userName" class="dropdown">
          <a class="dropdown-toggle" data-toggle="dropdown">
            <span class="glyphicon glyphicon-user"></span> {{userName}} <span class="caret"></span>
          </a>
          <ul class="dropdown-menu" role="menu">
            <li class="nav-dd last-dd" ng-click="link('/accounts/logout')">LOG OUT</li>
          </ul>
        </li>
      </ul>
    </div><!-- /.navbar-collapse -->
  </div><!-- /.container-fluid -->
</nav>

